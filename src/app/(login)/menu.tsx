"use client";

import * as jose from "jose";
import Link from "next/link";
import { usePathname } from "next/navigation";
import React from "react";

import { TokenInfo, defaultUserData } from "@/app/auth/type";

type MenuType = {
  url: string;
  name: string;
  icons?: {
      fill: React.JSX.Element | null;
      outline: React.JSX.Element | null;
  };
};

const mainMenu: MenuType[] = [
  {
    url: "/",
    name: "정보",
    icons: {
      fill: (
        <svg width="17" height="20" viewBox="0 0 17 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text" d="M8.75 17H8.5C6.13333 17 4.125 16.175 2.475 14.525C0.825 12.875 0 10.8667 0 8.5C0 6.13333 0.825 4.125 2.475 2.475C4.125 0.825 6.13333 0 8.5 0C9.68333 0 10.7875 0.220833 11.8125 0.6625C12.8375 1.10417 13.7375 1.7125 14.5125 2.4875C15.2875 3.2625 15.8958 4.1625 16.3375 5.1875C16.7792 6.2125 17 7.31667 17 8.5C17 10.7333 16.3708 12.8083 15.1125 14.725C13.8542 16.6417 12.2667 18.1417 10.35 19.225C10.1833 19.3083 10.0167 19.3542 9.85 19.3625C9.68333 19.3708 9.53333 19.3333 9.4 19.25C9.26667 19.1667 9.15 19.0583 9.05 18.925C8.95 18.7917 8.89167 18.6333 8.875 18.45L8.75 17ZM8.475 13.975C8.75833 13.975 9 13.875 9.2 13.675C9.4 13.475 9.5 13.2333 9.5 12.95C9.5 12.6667 9.4 12.425 9.2 12.225C9 12.025 8.75833 11.925 8.475 11.925C8.19167 11.925 7.95 12.025 7.75 12.225C7.55 12.425 7.45 12.6667 7.45 12.95C7.45 13.2333 7.55 13.475 7.75 13.675C7.95 13.875 8.19167 13.975 8.475 13.975ZM6.3 6.375C6.48333 6.45833 6.66667 6.4625 6.85 6.3875C7.03333 6.3125 7.18333 6.19167 7.3 6.025C7.45 5.825 7.625 5.67083 7.825 5.5625C8.025 5.45417 8.25 5.4 8.5 5.4C8.9 5.4 9.225 5.5125 9.475 5.7375C9.725 5.9625 9.85 6.25 9.85 6.6C9.85 6.81667 9.7875 7.03333 9.6625 7.25C9.5375 7.46667 9.31667 7.73333 9 8.05C8.58333 8.41667 8.275 8.7625 8.075 9.0875C7.875 9.4125 7.775 9.74167 7.775 10.075C7.775 10.275 7.84583 10.4458 7.9875 10.5875C8.12917 10.7292 8.3 10.8 8.5 10.8C8.7 10.8 8.86667 10.725 9 10.575C9.13333 10.425 9.23333 10.25 9.3 10.05C9.38333 9.76667 9.53333 9.50833 9.75 9.275C9.96667 9.04167 10.1667 8.83333 10.35 8.65C10.7 8.3 10.9625 7.95 11.1375 7.6C11.3125 7.25 11.4 6.9 11.4 6.55C11.4 5.78333 11.1375 5.16667 10.6125 4.7C10.0875 4.23333 9.38333 4 8.5 4C7.96667 4 7.475 4.12917 7.025 4.3875C6.575 4.64583 6.20833 5 5.925 5.45C5.825 5.63333 5.8125 5.8125 5.8875 5.9875C5.9625 6.1625 6.1 6.29167 6.3 6.375Z" />
        </svg>
      ),
      outline: (
        <svg width="17" height="20" viewBox="0 0 17 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text/40" d="M8.75 17H8.5C6.13333 17 4.125 16.175 2.475 14.525C0.825 12.875 0 10.8667 0 8.5C0 6.13333 0.825 4.125 2.475 2.475C4.125 0.825 6.13333 0 8.5 0C9.68333 0 10.7875 0.220833 11.8125 0.6625C12.8375 1.10417 13.7375 1.7125 14.5125 2.4875C15.2875 3.2625 15.8958 4.1625 16.3375 5.1875C16.7792 6.2125 17 7.31667 17 8.5C17 10.7333 16.3708 12.8083 15.1125 14.725C13.8542 16.6417 12.2667 18.1417 10.35 19.225C10.1833 19.3083 10.0167 19.3542 9.85 19.3625C9.68333 19.3708 9.53333 19.3333 9.4 19.25C9.26667 19.1667 9.15 19.0583 9.05 18.925C8.95 18.7917 8.89167 18.6333 8.875 18.45L8.75 17ZM11 16.35C12.1833 15.35 13.1458 14.1792 13.8875 12.8375C14.6292 11.4958 15 10.05 15 8.5C15 6.68333 14.3708 5.14583 13.1125 3.8875C11.8542 2.62917 10.3167 2 8.5 2C6.68333 2 5.14583 2.62917 3.8875 3.8875C2.62917 5.14583 2 6.68333 2 8.5C2 10.3167 2.62917 11.8542 3.8875 13.1125C5.14583 14.3708 6.68333 15 8.5 15H11V16.35ZM8.475 13.975C8.75833 13.975 9 13.875 9.2 13.675C9.4 13.475 9.5 13.2333 9.5 12.95C9.5 12.6667 9.4 12.425 9.2 12.225C9 12.025 8.75833 11.925 8.475 11.925C8.19167 11.925 7.95 12.025 7.75 12.225C7.55 12.425 7.45 12.6667 7.45 12.95C7.45 13.2333 7.55 13.475 7.75 13.675C7.95 13.875 8.19167 13.975 8.475 13.975ZM6.3 6.375C6.48333 6.45833 6.66667 6.4625 6.85 6.3875C7.03333 6.3125 7.18333 6.19167 7.3 6.025C7.45 5.825 7.625 5.67083 7.825 5.5625C8.025 5.45417 8.25 5.4 8.5 5.4C8.9 5.4 9.225 5.5125 9.475 5.7375C9.725 5.9625 9.85 6.25 9.85 6.6C9.85 6.81667 9.7875 7.03333 9.6625 7.25C9.5375 7.46667 9.31667 7.73333 9 8.05C8.58333 8.41667 8.275 8.7625 8.075 9.0875C7.875 9.4125 7.775 9.74167 7.775 10.075C7.775 10.275 7.84583 10.4458 7.9875 10.5875C8.12917 10.7292 8.3 10.8 8.5 10.8C8.7 10.8 8.86667 10.725 9 10.575C9.13333 10.425 9.23333 10.25 9.3 10.05C9.38333 9.76667 9.53333 9.50833 9.75 9.275C9.96667 9.04167 10.1667 8.83333 10.35 8.65C10.7 8.3 10.9625 7.95 11.1375 7.6C11.3125 7.25 11.4 6.9 11.4 6.55C11.4 5.78333 11.1375 5.16667 10.6125 4.7C10.0875 4.23333 9.38333 4 8.5 4C7.96667 4 7.475 4.12917 7.025 4.3875C6.575 4.64583 6.20833 5 5.925 5.45C5.825 5.63333 5.8125 5.8125 5.8875 5.9875C5.9625 6.1625 6.1 6.29167 6.3 6.375Z" />
        </svg>
      ),
    }
  },
  {
    url: "/wakeup/list",
    name: "기상",
    icons: {
      fill: (
        <svg width="21" height="15" viewBox="0 0 21 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text" d="M0.0698242 13.9222V8.92224C0.0698242 8.47224 0.161491 8.06391 0.344824 7.69724C0.528158 7.33057 0.769824 7.00557 1.06982 6.72224V3.92224C1.06982 3.08891 1.36149 2.38057 1.94482 1.79724C2.52816 1.21391 3.23649 0.922241 4.06982 0.922241H8.06982C8.45316 0.922241 8.81149 0.993075 9.14482 1.13474C9.47816 1.27641 9.78649 1.47224 10.0698 1.72224C10.3532 1.47224 10.6615 1.27641 10.9948 1.13474C11.3282 0.993075 11.6865 0.922241 12.0698 0.922241H16.0698C16.9032 0.922241 17.6115 1.21391 18.1948 1.79724C18.7782 2.38057 19.0698 3.08891 19.0698 3.92224V6.72224C19.3698 7.00557 19.6115 7.33057 19.7948 7.69724C19.9782 8.06391 20.0698 8.47224 20.0698 8.92224V13.9222C20.0698 14.2056 19.974 14.4431 19.7823 14.6347C19.5907 14.8264 19.3532 14.9222 19.0698 14.9222C18.7865 14.9222 18.549 14.8264 18.3573 14.6347C18.1657 14.4431 18.0698 14.2056 18.0698 13.9222V12.9222H2.06982V13.9222C2.06982 14.2056 1.97399 14.4431 1.78232 14.6347C1.59066 14.8264 1.35316 14.9222 1.06982 14.9222C0.786491 14.9222 0.548991 14.8264 0.357324 14.6347C0.165658 14.4431 0.0698242 14.2056 0.0698242 13.9222ZM11.0698 5.92224H17.0698V3.92224C17.0698 3.63891 16.974 3.40141 16.7823 3.20974C16.5907 3.01807 16.3532 2.92224 16.0698 2.92224H12.0698C11.7865 2.92224 11.549 3.01807 11.3573 3.20974C11.1657 3.40141 11.0698 3.63891 11.0698 3.92224V5.92224ZM3.06982 5.92224H9.06982V3.92224C9.06982 3.63891 8.97399 3.40141 8.78232 3.20974C8.59066 3.01807 8.35316 2.92224 8.06982 2.92224H4.06982C3.78649 2.92224 3.54899 3.01807 3.35732 3.20974C3.16566 3.40141 3.06982 3.63891 3.06982 3.92224V5.92224Z" />
        </svg>
      ),
      outline: (
        <svg width="21" height="15" viewBox="0 0 21 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text/40" d="M0.132812 13.4686V8.46863C0.132812 8.01863 0.224479 7.61029 0.407813 7.24363C0.591146 6.87696 0.832812 6.55196 1.13281 6.26863V3.46863C1.13281 2.63529 1.42448 1.92696 2.00781 1.34363C2.59115 0.760295 3.29948 0.468628 4.13281 0.468628H8.13281C8.51615 0.468628 8.87448 0.539461 9.20781 0.681128C9.54115 0.822795 9.84948 1.01863 10.1328 1.26863C10.4161 1.01863 10.7245 0.822795 11.0578 0.681128C11.3911 0.539461 11.7495 0.468628 12.1328 0.468628H16.1328C16.9661 0.468628 17.6745 0.760295 18.2578 1.34363C18.8411 1.92696 19.1328 2.63529 19.1328 3.46863V6.26863C19.4328 6.55196 19.6745 6.87696 19.8578 7.24363C20.0411 7.61029 20.1328 8.01863 20.1328 8.46863V13.4686C20.1328 13.752 20.037 13.9895 19.8453 14.1811C19.6536 14.3728 19.4161 14.4686 19.1328 14.4686C18.8495 14.4686 18.612 14.3728 18.4203 14.1811C18.2286 13.9895 18.1328 13.752 18.1328 13.4686V12.4686H2.13281V13.4686C2.13281 13.752 2.03698 13.9895 1.84531 14.1811C1.65365 14.3728 1.41615 14.4686 1.13281 14.4686C0.849479 14.4686 0.611979 14.3728 0.420312 14.1811C0.228646 13.9895 0.132812 13.752 0.132812 13.4686ZM11.1328 5.46863H17.1328V3.46863C17.1328 3.18529 17.037 2.94779 16.8453 2.75613C16.6536 2.56446 16.4161 2.46863 16.1328 2.46863H12.1328C11.8495 2.46863 11.612 2.56446 11.4203 2.75613C11.2286 2.94779 11.1328 3.18529 11.1328 3.46863V5.46863ZM3.13281 5.46863H9.13281V3.46863C9.13281 3.18529 9.03698 2.94779 8.84531 2.75613C8.65365 2.56446 8.41615 2.46863 8.13281 2.46863H4.13281C3.84948 2.46863 3.61198 2.56446 3.42031 2.75613C3.22865 2.94779 3.13281 3.18529 3.13281 3.46863V5.46863ZM2.13281 10.4686H18.1328V8.46863C18.1328 8.18529 18.037 7.94779 17.8453 7.75613C17.6536 7.56446 17.4161 7.46863 17.1328 7.46863H3.13281C2.84948 7.46863 2.61198 7.56446 2.42031 7.75613C2.22865 7.94779 2.13281 8.18529 2.13281 8.46863V10.4686Z"/>
        </svg>
      ),
    }
  },
  {
    url: "/machine/washer",
    name: "세탁",
    icons: {
      outline: (
        <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text/40" d="M2 20C1.45 20 0.979167 19.8042 0.5875 19.4125C0.195833 19.0208 0 18.55 0 18V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H14C14.55 0 15.0208 0.195833 15.4125 0.5875C15.8042 0.979167 16 1.45 16 2V18C16 18.55 15.8042 19.0208 15.4125 19.4125C15.0208 19.8042 14.55 20 14 20H2ZM2 18H14V2H2V18ZM8 17C9.38333 17 10.5625 16.5125 11.5375 15.5375C12.5125 14.5625 13 13.3833 13 12C13 10.6167 12.5125 9.4375 11.5375 8.4625C10.5625 7.4875 9.38333 7 8 7C6.61667 7 5.4375 7.4875 4.4625 8.4625C3.4875 9.4375 3 10.6167 3 12C3 13.3833 3.4875 14.5625 4.4625 15.5375C5.4375 16.5125 6.61667 17 8 17ZM8 15.3C7.56667 15.3 7.14583 15.2208 6.7375 15.0625C6.32917 14.9042 5.96667 14.6667 5.65 14.35L10.35 9.65C10.6667 9.96667 10.9042 10.3292 11.0625 10.7375C11.2208 11.1458 11.3 11.5667 11.3 12C11.3 12.9167 10.9792 13.6958 10.3375 14.3375C9.69583 14.9792 8.91667 15.3 8 15.3ZM4 5C4.28333 5 4.52083 4.90417 4.7125 4.7125C4.90417 4.52083 5 4.28333 5 4C5 3.71667 4.90417 3.47917 4.7125 3.2875C4.52083 3.09583 4.28333 3 4 3C3.71667 3 3.47917 3.09583 3.2875 3.2875C3.09583 3.47917 3 3.71667 3 4C3 4.28333 3.09583 4.52083 3.2875 4.7125C3.47917 4.90417 3.71667 5 4 5ZM7 5C7.28333 5 7.52083 4.90417 7.7125 4.7125C7.90417 4.52083 8 4.28333 8 4C8 3.71667 7.90417 3.47917 7.7125 3.2875C7.52083 3.09583 7.28333 3 7 3C6.71667 3 6.47917 3.09583 6.2875 3.2875C6.09583 3.47917 6 3.71667 6 4C6 4.28333 6.09583 4.52083 6.2875 4.7125C6.47917 4.90417 6.71667 5 7 5Z" />
        </svg>
      ),
      fill: (
        <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text" d="M2 20C1.45 20 0.979167 19.8042 0.5875 19.4125C0.195833 19.0208 0 18.55 0 18V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H14C14.55 0 15.0208 0.195833 15.4125 0.5875C15.8042 0.979167 16 1.45 16 2V18C16 18.55 15.8042 19.0208 15.4125 19.4125C15.0208 19.8042 14.55 20 14 20H2ZM8 17C9.38333 17 10.5625 16.5125 11.5375 15.5375C12.5125 14.5625 13 13.3833 13 12C13 10.6167 12.5125 9.4375 11.5375 8.4625C10.5625 7.4875 9.38333 7 8 7C6.61667 7 5.4375 7.4875 4.4625 8.4625C3.4875 9.4375 3 10.6167 3 12C3 13.3833 3.4875 14.5625 4.4625 15.5375C5.4375 16.5125 6.61667 17 8 17ZM8 15.3C7.56667 15.3 7.14583 15.2208 6.7375 15.0625C6.32917 14.9042 5.96667 14.6667 5.65 14.35L10.35 9.65C10.6667 9.96667 10.9042 10.3292 11.0625 10.7375C11.2208 11.1458 11.3 11.5667 11.3 12C11.3 12.9167 10.9792 13.6958 10.3375 14.3375C9.69583 14.9792 8.91667 15.3 8 15.3ZM4 5C4.28333 5 4.52083 4.90417 4.7125 4.7125C4.90417 4.52083 5 4.28333 5 4C5 3.71667 4.90417 3.47917 4.7125 3.2875C4.52083 3.09583 4.28333 3 4 3C3.71667 3 3.47917 3.09583 3.2875 3.2875C3.09583 3.47917 3 3.71667 3 4C3 4.28333 3.09583 4.52083 3.2875 4.7125C3.47917 4.90417 3.71667 5 4 5ZM7 5C7.28333 5 7.52083 4.90417 7.7125 4.7125C7.90417 4.52083 8 4.28333 8 4C8 3.71667 7.90417 3.47917 7.7125 3.2875C7.52083 3.09583 7.28333 3 7 3C6.71667 3 6.47917 3.09583 6.2875 3.2875C6.09583 3.47917 6 3.71667 6 4C6 4.28333 6.09583 4.52083 6.2875 4.7125C6.47917 4.90417 6.71667 5 7 5Z" />
        </svg>
      ),
    }
  },
  {
    url: "/stay/apply",
    name: "잔류",
    icons: {
      fill: (
        <svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text" d="M0 16V7C0 6.68333 0.0708333 6.38333 0.2125 6.1C0.354167 5.81667 0.55 5.58333 0.8 5.4L6.8 0.9C7.15 0.633333 7.55 0.5 8 0.5C8.45 0.5 8.85 0.633333 9.2 0.9L15.2 5.4C15.45 5.58333 15.6458 5.81667 15.7875 6.1C15.9292 6.38333 16 6.68333 16 7V16C16 16.55 15.8042 17.0208 15.4125 17.4125C15.0208 17.8042 14.55 18 14 18H11C10.7167 18 10.4792 17.9042 10.2875 17.7125C10.0958 17.5208 10 17.2833 10 17V12C10 11.7167 9.90417 11.4792 9.7125 11.2875C9.52083 11.0958 9.28333 11 9 11H7C6.71667 11 6.47917 11.0958 6.2875 11.2875C6.09583 11.4792 6 11.7167 6 12V17C6 17.2833 5.90417 17.5208 5.7125 17.7125C5.52083 17.9042 5.28333 18 5 18H2C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16Z" />
        </svg>
      ),
      outline: (
        <svg width="17" height="19" viewBox="0 0 17 19" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text/40" d="M2.07031 16.2697H5.07031V11.2697C5.07031 10.9863 5.16615 10.7488 5.35781 10.5572C5.54948 10.3655 5.78698 10.2697 6.07031 10.2697H10.0703C10.3536 10.2697 10.5911 10.3655 10.7828 10.5572C10.9745 10.7488 11.0703 10.9863 11.0703 11.2697V16.2697H14.0703V7.26965L8.07031 2.76965L2.07031 7.26965V16.2697ZM0.0703125 16.2697V7.26965C0.0703125 6.95299 0.141146 6.65299 0.282813 6.36965C0.424479 6.08632 0.620313 5.85299 0.870313 5.66965L6.87031 1.16965C7.22031 0.902987 7.62031 0.769653 8.07031 0.769653C8.52031 0.769653 8.92031 0.902987 9.27031 1.16965L15.2703 5.66965C15.5203 5.85299 15.7161 6.08632 15.8578 6.36965C15.9995 6.65299 16.0703 6.95299 16.0703 7.26965V16.2697C16.0703 16.8197 15.8745 17.2905 15.4828 17.6822C15.0911 18.0738 14.6203 18.2697 14.0703 18.2697H10.0703C9.78698 18.2697 9.54948 18.1738 9.35781 17.9822C9.16615 17.7905 9.07031 17.553 9.07031 17.2697V12.2697H7.07031V17.2697C7.07031 17.553 6.97448 17.7905 6.78281 17.9822C6.59115 18.1738 6.35365 18.2697 6.07031 18.2697H2.07031C1.52031 18.2697 1.04948 18.0738 0.657813 17.6822C0.266146 17.2905 0.0703125 16.8197 0.0703125 16.2697Z" />
        </svg>
      ),
    }
  },
  {
    url: "/jasup/my",
    name: "자습",
    icons: {
      fill: (
        <svg width="22" height="19" viewBox="0 0 22 19" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text" d="M11 18.55C10.8167 18.55 10.6375 18.525 10.4625 18.475C10.2875 18.425 10.125 18.3584 9.975 18.275C9.29167 17.8584 8.575 17.5417 7.825 17.325C7.075 17.1084 6.3 17 5.5 17C4.8 17 4.1125 17.0917 3.4375 17.275C2.7625 17.4584 2.11667 17.7167 1.5 18.05C1.15 18.2333 0.8125 18.225 0.4875 18.025C0.1625 17.825 0 17.5334 0 17.15V5.10002C0 4.91668 0.0458333 4.74168 0.1375 4.57502C0.229167 4.40835 0.366667 4.28335 0.55 4.20002C1.31667 3.80002 2.11667 3.50002 2.95 3.30002C3.78333 3.10002 4.63333 3.00002 5.5 3.00002C6.46667 3.00002 7.4125 3.12502 8.3375 3.37502C9.2625 3.62502 10.15 4.00002 11 4.50002V16.6C11.85 16.0667 12.7417 15.6667 13.675 15.4C14.6083 15.1334 15.55 15 16.5 15C17.1 15 17.6875 15.05 18.2625 15.15C18.8375 15.25 19.4167 15.4 20 15.6V3.60002C20.25 3.68335 20.4958 3.77085 20.7375 3.86252C20.9792 3.95418 21.2167 4.06668 21.45 4.20002C21.6333 4.28335 21.7708 4.40835 21.8625 4.57502C21.9542 4.74168 22 4.91668 22 5.10002V17.15C22 17.5334 21.8375 17.825 21.5125 18.025C21.1875 18.225 20.85 18.2333 20.5 18.05C19.8833 17.7167 19.2375 17.4584 18.5625 17.275C17.8875 17.0917 17.2 17 16.5 17C15.7 17 14.925 17.1084 14.175 17.325C13.425 17.5417 12.7083 17.8584 12.025 18.275C11.875 18.3584 11.7125 18.425 11.5375 18.475C11.3625 18.525 11.1833 18.55 11 18.55ZM13.825 13.25C13.6583 13.4 13.4792 13.4292 13.2875 13.3375C13.0958 13.2459 13 13.0917 13 12.875V4.70002C13 4.63335 13.0125 4.57085 13.0375 4.51252C13.0625 4.45418 13.1 4.40002 13.15 4.35002L17.15 0.350016C17.3167 0.18335 17.5 0.141683 17.7 0.225016C17.9 0.30835 18 0.466683 18 0.700016V9.27502C18 9.35835 17.9833 9.42918 17.95 9.48752C17.9167 9.54585 17.875 9.60002 17.825 9.65002L13.825 13.25Z" />
        </svg>
      ),
      outline: (
        <svg width="22" height="19" viewBox="0 0 22 19" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path className="fill-text/40" d="M11 18.55C10.8167 18.55 10.6375 18.525 10.4625 18.475C10.2875 18.425 10.125 18.3584 9.975 18.275C9.29167 17.8584 8.575 17.5417 7.825 17.325C7.075 17.1084 6.3 17 5.5 17C4.8 17 4.1125 17.0917 3.4375 17.275C2.7625 17.4584 2.11667 17.7167 1.5 18.05C1.15 18.2333 0.8125 18.225 0.4875 18.025C0.1625 17.825 0 17.5334 0 17.15V5.10002C0 4.91668 0.0458333 4.74168 0.1375 4.57502C0.229167 4.40835 0.366667 4.28335 0.55 4.20002C1.31667 3.80002 2.11667 3.50002 2.95 3.30002C3.78333 3.10002 4.63333 3.00002 5.5 3.00002C6.46667 3.00002 7.4125 3.12502 8.3375 3.37502C9.2625 3.62502 10.15 4.00002 11 4.50002V16.6C11.85 16.0667 12.7417 15.6667 13.675 15.4C14.6083 15.1334 15.55 15 16.5 15C17.1 15 17.6875 15.05 18.2625 15.15C18.8375 15.25 19.4167 15.4 20 15.6V3.60002C20.25 3.68335 20.4958 3.77085 20.7375 3.86252C20.9792 3.95418 21.2167 4.06668 21.45 4.20002C21.6333 4.28335 21.7708 4.40835 21.8625 4.57502C21.9542 4.74168 22 4.91668 22 5.10002V17.15C22 17.5334 21.8375 17.825 21.5125 18.025C21.1875 18.225 20.85 18.2333 20.5 18.05C19.8833 17.7167 19.2375 17.4584 18.5625 17.275C17.8875 17.0917 17.2 17 16.5 17C15.7 17 14.925 17.1084 14.175 17.325C13.425 17.5417 12.7083 17.8584 12.025 18.275C11.875 18.3584 11.7125 18.425 11.5375 18.475C11.3625 18.525 11.1833 18.55 11 18.55ZM13.825 13.25C13.6583 13.4 13.4792 13.4292 13.2875 13.3375C13.0958 13.2459 13 13.0917 13 12.875V4.70002C13 4.63335 13.0125 4.57085 13.0375 4.51252C13.0625 4.45418 13.1 4.40002 13.15 4.35002L17.15 0.350016C17.3167 0.18335 17.5 0.141683 17.7 0.225016C17.9 0.30835 18 0.466683 18 0.700016V9.27502C18 9.35835 17.9833 9.42918 17.95 9.48752C17.9167 9.54585 17.875 9.60002 17.825 9.65002L13.825 13.25ZM9 15.625V5.72502C8.45 5.49168 7.87917 5.31252 7.2875 5.18752C6.69583 5.06252 6.1 5.00002 5.5 5.00002C4.88333 5.00002 4.28333 5.05835 3.7 5.17502C3.11667 5.29168 2.55 5.46668 2 5.70002V15.625C2.58333 15.4084 3.1625 15.25 3.7375 15.15C4.3125 15.05 4.9 15 5.5 15C6.1 15 6.6875 15.05 7.2625 15.15C7.8375 15.25 8.41667 15.4084 9 15.625Z" />
        </svg>
      ),
    }
  },
];

const manage: MenuType = {
  url: "/teacher/edit",
  name: "관리",
  icons: {
    fill: null,
    outline: null,
  }
};
const bamboo: MenuType = {
  url: "/bamboo",
  name: "대숲",
  icons: {
    fill: null,
    outline: null,
  }
};

const Menu = () => {
  const pathname = usePathname();
  const [menuCopy, setMenuCopy] = React.useState(mainMenu);
  const [userInfo, setUserInfo] = React.useState(defaultUserData);

  React.useEffect(() => {
    const accessToken = localStorage.getItem("accessToken")!;
    const decrypt = jose.decodeJwt(accessToken) as TokenInfo;
    setUserInfo(decrypt.data);
  }, []);

  React.useEffect(() => {
    if(userInfo.type === "teacher") 
      setMenuCopy([ ...mainMenu, manage ]);
    else setMenuCopy([ ...mainMenu, bamboo ]);
  }, [userInfo]);


  return (
    <nav className="px-4 w-[100vw] fixed bottom-0 left-0 flex flex-row justify-center z-50">
      <div 
        className="max-w-[700px] flex flex-row justify-around w-full bg-background border-t border-text/10 -pb-safe-offset-5"
      >
        {
          menuCopy.map((item, index) => {
            const isCurrentPage = pathname.split("/")[1] === item.url.split("/")[1];
            return (
              <Link
                key={index} 
                href={item.url}
                className={[
                  "w-full text-center py-5 text-sm font-semibold hover:text-text/100 transition-colors flex flex-col gap-2 items-center justify-center",
                  // isCurrentPage && pathname.split("/").length === 2 ? "border-b-2 border-primary" : "",
                ].join(" ")}
                prefetch={true}
              >
                {item.icons ? (isCurrentPage ? item.icons.fill : item.icons.outline) : null}
                <p className={[
                  isCurrentPage ? "text-text/100" : "text-text/40",
                  "text-xs"
                ].join(" ")}>{item.name}</p>
              </Link>
            );
          })
        }
      </div>
    </nav>
  );
};

export default Menu;